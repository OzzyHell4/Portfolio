<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Админ-панель | Auto Parts Store</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    .admin-wrapper {
      max-width: 900px;
      margin: 64px auto 0 auto;
      min-height: 500px;
      background: #232323;
      border-radius: 16px;
      border: 2px solid #ffe9b0;
      box-shadow: 0 4px 32px #000a;
      padding: 40px 32px 32px 32px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }
    .admin-title {
      color: #fff;
      font-size: 2em;
      font-weight: 700;
      margin-bottom: 32px;
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header__top">
      <a href="index.html" class="logo" style="text-decoration:none; color:inherit;">
        <i class="fa-solid fa-gear"></i>
        <span>AUTO PARTS<br>STORE</span>
      </a>
      <form class="search-bar">
        <input type="text" placeholder="Поиск по каталогу">
        <button type="submit"><i class="fa fa-search"></i></button>
      </form>
      <div class="header__icons">
        <a href="favorites.html"><i class="fa-regular fa-heart" style="text-decoration: none; color: #fff;"></i></a>
        <a href="register.html"><i class="fa-solid fa-cart-shopping" style="text-decoration: none; color: #fff;"></i></a>
        <a href="signup.html"><i class="fa-regular fa-user" style="text-decoration: none; color: #fff;"></i></a>
      </div>
    </div>
  </header>
  <main>
    <div class="admin-wrapper">
      <div class="admin-title">Админ-панель</div>
      <form id="addProductForm" style="display:flex;gap:18px;align-items:flex-end;margin-bottom:32px;flex-wrap:wrap;">
        <div style="display:flex;flex-direction:column;gap:6px;">
          <label for="prod-title" style="color:#fff;">Название</label>
          <input id="prod-title" type="text" required style="padding:8px 12px;border-radius:6px;border:1px solid #ccc;min-width:160px;">
        </div>
        <div style="display:flex;flex-direction:column;gap:6px;">
          <label for="prod-price" style="color:#fff;">Цена</label>
          <input id="prod-price" type="number" min="1" required style="padding:8px 12px;border-radius:6px;border:1px solid #ccc;min-width:100px;">
        </div>
        <div style="display:flex;flex-direction:column;gap:6px;">
          <label for="prod-desc" style="color:#fff;">Описание</label>
          <input id="prod-desc" type="text" style="padding:8px 12px;border-radius:6px;border:1px solid #ccc;min-width:180px;">
        </div>
        <div style="display:flex;flex-direction:column;gap:6px;">
          <label for="prod-img" style="color:#fff;">Фото</label>
          <input id="prod-img" type="file" accept="image/*" style="min-width:120px;">
        </div>
        <button type="submit" style="background:#ffe9b0;color:#232323;font-weight:600;padding:10px 28px;border:none;border-radius:8px;cursor:pointer;">Добавить</button>
      </form>
      <div id="admin-products-list" style="margin-top:24px;"></div>
    </div>
  </main>
  <footer class="footer">
    <div class="footer__contacts">
      <h4>Контакты</h4>
      <ul>
        <li>Телефон: +7 (XXX)XXX-XX-XX</li>
        <li>Email: info@вашсайт.ру</li>
        <li>График работы: Пн-Пт: 9:00-18:00</li>
      </ul>
    </div>
    <div class="footer__about">
      <h4>О компании</h4>
    </div>
    <div class="footer__bottom">
      <span>© 2024 Название компании</span>
      <a href="#">Политика конфиденциальности</a>
    </div>
  </footer>
  <script>
    // --- Admin panel logic ---
    function getProducts() {
      return JSON.parse(localStorage.getItem('products') || '[]');
    }
    function setProducts(arr) {
      localStorage.setItem('products', JSON.stringify(arr));
    }
    function renderProducts() {
      const list = document.getElementById('admin-products-list');
      const products = getProducts();
      if (!products.length) {
        list.innerHTML = '<div style="color:#fff;font-size:1.2em;">Нет товаров</div>';
        return;
      }
      let html = `<table style="width:100%;border-collapse:collapse;background:#19191b;color:#fff;">
        <thead>
          <tr style="background:#232323;">
            <th style="padding:10px 8px;border:2px solid #ffe9b0;">Фото</th>
            <th style="padding:10px 8px;border:2px solid #ffe9b0;">Имя</th>
            <th style="padding:10px 8px;border:2px solid #ffe9b0;">Цена</th>
            <th style="padding:10px 8px;border:2px solid #ffe9b0;">Описание</th>
            <th style="padding:10px 8px;border:2px solid #ffe9b0;">Действия</th>
          </tr>
        </thead>
        <tbody>`;
      products.forEach((prod, idx) => {
        html += `<tr>
          <td style='padding:8px 6px;text-align:center;border:2px solid #ffe9b0;'>${prod.img ? `<img src='${prod.img}' alt='Фото' style='max-width:70px;max-height:50px;border-radius:8px;'>` : '—'}</td>
          <td style='padding:8px 6px;border:2px solid #ffe9b0;'>${prod.title}</td>
          <td style='padding:8px 6px;border:2px solid #ffe9b0;'>${prod.price} руб</td>
          <td style='padding:8px 6px;border:2px solid #ffe9b0;'>${prod.desc||''}</td>
          <td style='padding:8px 6px;border:2px solid #ffe9b0;'>
            <button class="edit-prod-btn" data-idx="${idx}" style="background:#ffe9b0;color:#232323;font-weight:600;padding:6px 16px;border:none;border-radius:6px;cursor:pointer;margin-right:6px;">Редактировать</button>
            <button class="del-prod-btn" data-idx="${idx}" style="background:#e53935;color:#fff;font-weight:600;padding:6px 16px;border:none;border-radius:6px;cursor:pointer;">Удалить</button>
          </td>
        </tr>`;
      });
      html += '</tbody></table>';
      list.innerHTML = html;
      // Удаление товара
      list.querySelectorAll('.del-prod-btn').forEach(btn => {
        btn.onclick = function() {
          const idx = +this.getAttribute('data-idx');
          const products = getProducts();
          products.splice(idx, 1);
          setProducts(products);
          renderProducts();
        };
      });
      // Редактирование товара
      list.querySelectorAll('.edit-prod-btn').forEach(btn => {
        btn.onclick = function() {
          const idx = +this.getAttribute('data-idx');
          const products = getProducts();
          const prod = products[idx];
          // Заменяем строку таблицы на форму редактирования
          const tr = this.closest('tr');
          tr.innerHTML = `<td style='padding:8px 6px;text-align:center;border:2px solid #ffe9b0;'>
            ${prod.img ? `<img src='${prod.img}' alt='Фото' style='max-width:70px;max-height:50px;border-radius:8px;'>` : '—'}<br>
            <input type='file' id='edit-img' accept='image/*' style='width:90%;margin-top:6px;'>
          </td>
          <td style='padding:8px 6px;border:2px solid #ffe9b0;'><input type='text' value='${prod.title}' id='edit-title' style='padding:6px 8px;border-radius:6px;border:1px solid #ccc;width:90%;'></td>
          <td style='padding:8px 6px;border:2px solid #ffe9b0;'><input type='number' value='${prod.price}' id='edit-price' style='padding:6px 8px;border-radius:6px;border:1px solid #ccc;width:90%;'></td>
          <td style='padding:8px 6px;border:2px solid #ffe9b0;'><input type='text' value='${prod.desc||''}' id='edit-desc' style='padding:6px 8px;border-radius:6px;border:1px solid #ccc;width:90%;'></td>
          <td style='padding:8px 6px;border:2px solid #ffe9b0;'>
            <button class='save-edit-btn' style='background:#ffe9b0;color:#232323;font-weight:600;padding:6px 16px;border:none;border-radius:6px;cursor:pointer;margin-right:6px;'>Сохранить</button>
            <button class='cancel-edit-btn' style='background:#e53935;color:#fff;font-weight:600;padding:6px 16px;border:none;border-radius:6px;cursor:pointer;'>Отмена</button>
          </td>`;
          tr.querySelector('.save-edit-btn').onclick = function() {
            prod.title = tr.querySelector('#edit-title').value.trim();
            prod.price = tr.querySelector('#edit-price').value.trim();
            prod.desc = tr.querySelector('#edit-desc').value.trim();
            const imgFile = tr.querySelector('#edit-img').files[0];
            if (imgFile) {
              const reader = new FileReader();
              reader.onload = function(ev) {
                prod.img = ev.target.result;
                products[idx] = prod;
                setProducts(products);
                renderProducts();
              };
              reader.readAsDataURL(imgFile);
            } else {
              products[idx] = prod;
              setProducts(products);
              renderProducts();
            }
          };
          tr.querySelector('.cancel-edit-btn').onclick = function() {
            renderProducts();
          };
        };
      });
    }
    document.getElementById('addProductForm').onsubmit = function(e) {
      e.preventDefault();
      const title = document.getElementById('prod-title').value.trim();
      const price = document.getElementById('prod-price').value.trim();
      const desc = document.getElementById('prod-desc').value.trim();
      const imgInput = document.getElementById('prod-img');
      const products = getProducts();
      function addProduct(imgData) {
        products.push({ title, price, desc, img: imgData });
        setProducts(products);
        renderProducts();
        document.getElementById('addProductForm').reset();
      }
      if (imgInput.files && imgInput.files[0]) {
        const reader = new FileReader();
        reader.onload = function(ev) { addProduct(ev.target.result); };
        reader.readAsDataURL(imgInput.files[0]);
      } else {
        addProduct('');
      }
    };
    renderProducts();
    // --- Logout handler ---
    const logoutBtn = document.querySelector('.profile-menu.logout');
    if (logoutBtn) {
      logoutBtn.onclick = function() {
        localStorage.removeItem('currentUser');
        window.location.href = 'login.html';
      };
    }
  </script>
</body>
</html> 